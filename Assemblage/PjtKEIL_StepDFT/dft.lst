


ARM Macro Assembler    Page 1 


    1 00000000                 PRESERVE8
    2 00000000                 THUMB
    3 00000000         
    4 00000000         
    5 00000000         
    6 00000000         ; ====================== zone de réservation de données,
                         ======================================
    7 00000000         ;Section RAM (read only) :
    8 00000000                 area             mesdata,data,readonly
    9 00000000                 import           LeSignal
   10 00000000         ;Section RAM (read write):
   11 00000000                 area             maram,data,readwrite
   12 00000000 00000000 
                       Iterateur
                               dcd              0
   13 00000004 00000000 
                       reel    dcd              0
   14 00000008 00000000 
                       imaginaire
                               dcd              0
   15 0000000C 00000040 
                       Viktor  dcd              64
   16 00000010         
   17 00000010                 export           DFT_ModuleAuCarre
   18 00000010         ; ======================================================
                       =========================================
   19 00000010         
   20 00000010         
   21 00000010         
   22 00000010         
   23 00000010         ;Section ROM code (read only) :  
   24 00000010                 area             moncode,code,readonly
   25 00000000         ; écrire le code ici  
   26 00000000         
   27 00000000         DFT_ModuleAuCarre
                               proc                         ;R0 vaut l'adresse 
                                                            de notre signal, R1
                                                             la valeur de k 
   28 00000000 E92D 4FF0       push             {lr,R4-R11}
   29 00000004 4A26            ldr              R2,=TabCos
   30 00000006         
   31 00000006 B50F            push             {lr,R0-R3}
   32 00000008 F7FF FFFE       bl               CalculCos
   33 0000000C E8BD 400F       pop              {lr,R0-R3}
   34 00000010         
   35 00000010 4A24            ldr              R2,=TabSin
   36 00000012         
   37 00000012 B50F            push             {lr,R0-R3}
   38 00000014 F7FF FFFE       bl               CalculSin
   39 00000018 E8BD 400F       pop              {lr,R0-R3}
   40 0000001C         
   41 0000001C 4822            ldr              R0,=reel
   42 0000001E 4923            ldr              R1,=imaginaire
   43 00000020 6800            ldr              R0,[R0]
   44 00000022 6809            ldr              R1,[R1]
   45 00000024 FB00 F000       mul              R0,R0
   46 00000028 FB01 F101       mul              R1,R1
   47 0000002C 4408            add              R0,R1
   48 0000002E E8BD 4FF0       pop              {lr,R4-R11}



ARM Macro Assembler    Page 2 


   49 00000032 4770            bx               lr
   50 00000034                 endp                         ;
   51 00000034         
   52 00000034         CalculSin
                               proc
   53 00000034 F04F 0300       mov              R3,#0
   54 00000038         ;R0 correspond à l'adresse du signal, R1 à la valeur de 
                       k, R2 à l'adresse de Tabsin, et R3 l'itérateur
   55 00000038 B50F    boucle1 push             {lr,R0-R3}
   56 0000003A F7FF FFFE       bl               OperationSin ;on fait l'operati
                                                            on de multiplicatio
                                                            n et de stockage da
                                                            ns une sub-routine
   57 0000003E E8BD 400F       pop              {lr,R0-R3}
   58 00000042         
   59 00000042 F103 0301       add              R3,#1
   60 00000046 4299            cmp              R1,R3
   61 00000048 D1F6            bne              boucle1
   62 0000004A         
   63 0000004A 4770            bx               lr
   64 0000004C                 endp
   65 0000004C         
   66 0000004C         CalculCos
                               proc
   67 0000004C F04F 0300       mov              R3,#0
   68 00000050         ;R0 correspond à l'adresse du signal, R1 à la valeur de 
                       k, R2 à l'adresse de TabCos, et R3 l'itérateur
   69 00000050 B51F    boucle2 push             {lr,R0-R4}
   70 00000052 F7FF FFFE       bl               OperationCos ;on fait l'operati
                                                            on de multiplicatio
                                                            n et de stockage da
                                                            ns une sub-routine
   71 00000056 E8BD 400F       pop              {lr,R0-R3}
   72 0000005A         
   73 0000005A F103 0301       add              R3,#1
   74 0000005E 4299            cmp              R1,R3
   75 00000060 D1F6            bne              boucle2
   76 00000062         
   77 00000062 4770            bx               lr
   78 00000064                 endp
   79 00000064         
   80 00000064         OperationSin
                               proc
   81 00000064 FB03 F301       mul              R3, R1
   82 00000068 F003 033F       AND              R3, #63
   83 0000006C F930 0013       ldrsh            R0,[R0,R3, lsl #1] 
                                                            ;Valeur du signal 
   84 00000070 F932 2013       ldrsh            R2,[R2,R3,lsl #1] 
                                                            ;valeur du sin
   85 00000074 FB00 F002       mul              R0,R2
   86 00000078 490C            ldr              R1,=imaginaire
   87 0000007A 680A            ldr              R2,[R1]
   88 0000007C 4402            add              R2,R0
   89 0000007E 600A            str              R2,[R1]
   90 00000080 4770            bx               lr
   91 00000082                 endp
   92 00000082         
   93 00000082         OperationCos
                               proc



ARM Macro Assembler    Page 3 


   94 00000082 FB03 F301       mul              R3, R1
   95 00000086 F003 033F       AND              R3, #63
   96 0000008A F930 0013       ldrsh            R0,[R0,R3, lsl #1] 
                                                            ;Valeur du signal 
   97 0000008E F932 2013       ldrsh            R2,[R2,R3,lsl #1] 
                                                            ;valeur du cos
   98 00000092 FB00 F002       mul              R0,R2
   99 00000096 4904            ldr              R1,=reel
  100 00000098 680A            ldr              R2,[R1]
  101 0000009A 4402            add              R2,R0
  102 0000009C 600A            str              R2,[R1]
  103 0000009E 4770            bx               lr
  104 000000A0                 endp
  105 000000A0         
  106 000000A0         
  107 000000A0         
  108 000000A0         
  109 000000A0         
  110 000000A0         ;Section ROM code (read only) :  
  111 000000A0 00000000 
              00000000 
              00000000 
              00000000         AREA             Trigo, DATA, READONLY
  112 00000000                 export           TabCos
  113 00000000                 export           TabSin
  114 00000000         ; codage fractionnaire 1.15
  115 00000000         
  116 00000000         
  117 00000000         TabCos
  118 00000000 FF 7F           DCW              32767       ;  0 0x7fff  0.9999
                                                            7
  119 00000002 62 7F           DCW              32610       ;  1 0x7f62  0.9951
                                                            8
  120 00000004 8A 7D           DCW              32138       ;  2 0x7d8a  0.9807
                                                            7
  121 00000006 7D 7A           DCW              31357       ;  3 0x7a7d  0.9569
                                                            4
  122 00000008 42 76           DCW              30274       ;  4 0x7642  0.9238
                                                            9
  123 0000000A E3 70           DCW              28899       ;  5 0x70e3  0.8819
                                                            3
  124 0000000C 6E 6A           DCW              27246       ;  6 0x6a6e  0.8314
                                                            8
  125 0000000E F2 62           DCW              25330       ;  7 0x62f2  0.7730
                                                            1
  126 00000010 82 5A           DCW              23170       ;  8 0x5a82  0.7070
                                                            9
  127 00000012 34 51           DCW              20788       ;  9 0x5134  0.6344
                                                            0
  128 00000014 1D 47           DCW              18205       ; 10 0x471d  0.5555
                                                            7
  129 00000016 57 3C           DCW              15447       ; 11 0x3c57  0.4714
                                                            1
  130 00000018 FC 30           DCW              12540       ; 12 0x30fc  0.3826
                                                            9
  131 0000001A 28 25           DCW              9512        ; 13 0x2528  0.2902
                                                            8
  132 0000001C F9 18           DCW              6393        ; 14 0x18f9  0.1951
                                                            0



ARM Macro Assembler    Page 4 


  133 0000001E 8C 0C           DCW              3212        ; 15 0x0c8c  0.0980
                                                            2
  134 00000020 00 00           DCW              0           ; 16 0x0000  0.0000
                                                            0
  135 00000022 74 F3           DCW              -3212       ; 17 0xf374 -0.0980
                                                            2
  136 00000024 07 E7           DCW              -6393       ; 18 0xe707 -0.1951
                                                            0
  137 00000026 D8 DA           DCW              -9512       ; 19 0xdad8 -0.2902
                                                            8
  138 00000028 04 CF           DCW              -12540      ; 20 0xcf04 -0.3826
                                                            9
  139 0000002A A9 C3           DCW              -15447      ; 21 0xc3a9 -0.4714
                                                            1
  140 0000002C E3 B8           DCW              -18205      ; 22 0xb8e3 -0.5555
                                                            7
  141 0000002E CC AE           DCW              -20788      ; 23 0xaecc -0.6344
                                                            0
  142 00000030 7E A5           DCW              -23170      ; 24 0xa57e -0.7070
                                                            9
  143 00000032 0E 9D           DCW              -25330      ; 25 0x9d0e -0.7730
                                                            1
  144 00000034 92 95           DCW              -27246      ; 26 0x9592 -0.8314
                                                            8
  145 00000036 1D 8F           DCW              -28899      ; 27 0x8f1d -0.8819
                                                            3
  146 00000038 BE 89           DCW              -30274      ; 28 0x89be -0.9238
                                                            9
  147 0000003A 83 85           DCW              -31357      ; 29 0x8583 -0.9569
                                                            4
  148 0000003C 76 82           DCW              -32138      ; 30 0x8276 -0.9807
                                                            7
  149 0000003E 9E 80           DCW              -32610      ; 31 0x809e -0.9951
                                                            8
  150 00000040 00 80           DCW              -32768      ; 32 0x8000 -1.0000
                                                            0
  151 00000042 9E 80           DCW              -32610      ; 33 0x809e -0.9951
                                                            8
  152 00000044 76 82           DCW              -32138      ; 34 0x8276 -0.9807
                                                            7
  153 00000046 83 85           DCW              -31357      ; 35 0x8583 -0.9569
                                                            4
  154 00000048 BE 89           DCW              -30274      ; 36 0x89be -0.9238
                                                            9
  155 0000004A 1D 8F           DCW              -28899      ; 37 0x8f1d -0.8819
                                                            3
  156 0000004C 92 95           DCW              -27246      ; 38 0x9592 -0.8314
                                                            8
  157 0000004E 0E 9D           DCW              -25330      ; 39 0x9d0e -0.7730
                                                            1
  158 00000050 7E A5           DCW              -23170      ; 40 0xa57e -0.7070
                                                            9
  159 00000052 CC AE           DCW              -20788      ; 41 0xaecc -0.6344
                                                            0
  160 00000054 E3 B8           DCW              -18205      ; 42 0xb8e3 -0.5555
                                                            7
  161 00000056 A9 C3           DCW              -15447      ; 43 0xc3a9 -0.4714
                                                            1
  162 00000058 04 CF           DCW              -12540      ; 44 0xcf04 -0.3826



ARM Macro Assembler    Page 5 


                                                            9
  163 0000005A D8 DA           DCW              -9512       ; 45 0xdad8 -0.2902
                                                            8
  164 0000005C 07 E7           DCW              -6393       ; 46 0xe707 -0.1951
                                                            0
  165 0000005E 74 F3           DCW              -3212       ; 47 0xf374 -0.0980
                                                            2
  166 00000060 00 00           DCW              0           ; 48 0x0000  0.0000
                                                            0
  167 00000062 8C 0C           DCW              3212        ; 49 0x0c8c  0.0980
                                                            2
  168 00000064 F9 18           DCW              6393        ; 50 0x18f9  0.1951
                                                            0
  169 00000066 28 25           DCW              9512        ; 51 0x2528  0.2902
                                                            8
  170 00000068 FC 30           DCW              12540       ; 52 0x30fc  0.3826
                                                            9
  171 0000006A 57 3C           DCW              15447       ; 53 0x3c57  0.4714
                                                            1
  172 0000006C 1D 47           DCW              18205       ; 54 0x471d  0.5555
                                                            7
  173 0000006E 34 51           DCW              20788       ; 55 0x5134  0.6344
                                                            0
  174 00000070 82 5A           DCW              23170       ; 56 0x5a82  0.7070
                                                            9
  175 00000072 F2 62           DCW              25330       ; 57 0x62f2  0.7730
                                                            1
  176 00000074 6E 6A           DCW              27246       ; 58 0x6a6e  0.8314
                                                            8
  177 00000076 E3 70           DCW              28899       ; 59 0x70e3  0.8819
                                                            3
  178 00000078 42 76           DCW              30274       ; 60 0x7642  0.9238
                                                            9
  179 0000007A 7D 7A           DCW              31357       ; 61 0x7a7d  0.9569
                                                            4
  180 0000007C 8A 7D           DCW              32138       ; 62 0x7d8a  0.9807
                                                            7
  181 0000007E 62 7F           DCW              32610       ; 63 0x7f62  0.9951
                                                            8
  182 00000080         TabSin
  183 00000080 00 00           DCW              0           ;  0 0x0000  0.0000
                                                            0
  184 00000082 8C 0C           DCW              3212        ;  1 0x0c8c  0.0980
                                                            2
  185 00000084 F9 18           DCW              6393        ;  2 0x18f9  0.1951
                                                            0
  186 00000086 28 25           DCW              9512        ;  3 0x2528  0.2902
                                                            8
  187 00000088 FC 30           DCW              12540       ;  4 0x30fc  0.3826
                                                            9
  188 0000008A 57 3C           DCW              15447       ;  5 0x3c57  0.4714
                                                            1
  189 0000008C 1D 47           DCW              18205       ;  6 0x471d  0.5555
                                                            7
  190 0000008E 34 51           DCW              20788       ;  7 0x5134  0.6344
                                                            0
  191 00000090 82 5A           DCW              23170       ;  8 0x5a82  0.7070
                                                            9
  192 00000092 F2 62           DCW              25330       ;  9 0x62f2  0.7730



ARM Macro Assembler    Page 6 


                                                            1
  193 00000094 6E 6A           DCW              27246       ; 10 0x6a6e  0.8314
                                                            8
  194 00000096 E3 70           DCW              28899       ; 11 0x70e3  0.8819
                                                            3
  195 00000098 42 76           DCW              30274       ; 12 0x7642  0.9238
                                                            9
  196 0000009A 7D 7A           DCW              31357       ; 13 0x7a7d  0.9569
                                                            4
  197 0000009C 8A 7D           DCW              32138       ; 14 0x7d8a  0.9807
                                                            7
  198 0000009E 62 7F           DCW              32610       ; 15 0x7f62  0.9951
                                                            8
  199 000000A0 FF 7F           DCW              32767       ; 16 0x7fff  0.9999
                                                            7
  200 000000A2 62 7F           DCW              32610       ; 17 0x7f62  0.9951
                                                            8
  201 000000A4 8A 7D           DCW              32138       ; 18 0x7d8a  0.9807
                                                            7
  202 000000A6 7D 7A           DCW              31357       ; 19 0x7a7d  0.9569
                                                            4
  203 000000A8 42 76           DCW              30274       ; 20 0x7642  0.9238
                                                            9
  204 000000AA E3 70           DCW              28899       ; 21 0x70e3  0.8819
                                                            3
  205 000000AC 6E 6A           DCW              27246       ; 22 0x6a6e  0.8314
                                                            8
  206 000000AE F2 62           DCW              25330       ; 23 0x62f2  0.7730
                                                            1
  207 000000B0 82 5A           DCW              23170       ; 24 0x5a82  0.7070
                                                            9
  208 000000B2 34 51           DCW              20788       ; 25 0x5134  0.6344
                                                            0
  209 000000B4 1D 47           DCW              18205       ; 26 0x471d  0.5555
                                                            7
  210 000000B6 57 3C           DCW              15447       ; 27 0x3c57  0.4714
                                                            1
  211 000000B8 FC 30           DCW              12540       ; 28 0x30fc  0.3826
                                                            9
  212 000000BA 28 25           DCW              9512        ; 29 0x2528  0.2902
                                                            8
  213 000000BC F9 18           DCW              6393        ; 30 0x18f9  0.1951
                                                            0
  214 000000BE 8C 0C           DCW              3212        ; 31 0x0c8c  0.0980
                                                            2
  215 000000C0 00 00           DCW              0           ; 32 0x0000  0.0000
                                                            0
  216 000000C2 74 F3           DCW              -3212       ; 33 0xf374 -0.0980
                                                            2
  217 000000C4 07 E7           DCW              -6393       ; 34 0xe707 -0.1951
                                                            0
  218 000000C6 D8 DA           DCW              -9512       ; 35 0xdad8 -0.2902
                                                            8
  219 000000C8 04 CF           DCW              -12540      ; 36 0xcf04 -0.3826
                                                            9
  220 000000CA A9 C3           DCW              -15447      ; 37 0xc3a9 -0.4714
                                                            1
  221 000000CC E3 B8           DCW              -18205      ; 38 0xb8e3 -0.5555
                                                            7



ARM Macro Assembler    Page 7 


  222 000000CE CC AE           DCW              -20788      ; 39 0xaecc -0.6344
                                                            0
  223 000000D0 7E A5           DCW              -23170      ; 40 0xa57e -0.7070
                                                            9
  224 000000D2 0E 9D           DCW              -25330      ; 41 0x9d0e -0.7730
                                                            1
  225 000000D4 92 95           DCW              -27246      ; 42 0x9592 -0.8314
                                                            8
  226 000000D6 1D 8F           DCW              -28899      ; 43 0x8f1d -0.8819
                                                            3
  227 000000D8 BE 89           DCW              -30274      ; 44 0x89be -0.9238
                                                            9
  228 000000DA 83 85           DCW              -31357      ; 45 0x8583 -0.9569
                                                            4
  229 000000DC 76 82           DCW              -32138      ; 46 0x8276 -0.9807
                                                            7
  230 000000DE 9E 80           DCW              -32610      ; 47 0x809e -0.9951
                                                            8
  231 000000E0 00 80           DCW              -32768      ; 48 0x8000 -1.0000
                                                            0
  232 000000E2 9E 80           DCW              -32610      ; 49 0x809e -0.9951
                                                            8
  233 000000E4 76 82           DCW              -32138      ; 50 0x8276 -0.9807
                                                            7
  234 000000E6 83 85           DCW              -31357      ; 51 0x8583 -0.9569
                                                            4
  235 000000E8 BE 89           DCW              -30274      ; 52 0x89be -0.9238
                                                            9
  236 000000EA 1D 8F           DCW              -28899      ; 53 0x8f1d -0.8819
                                                            3
  237 000000EC 92 95           DCW              -27246      ; 54 0x9592 -0.8314
                                                            8
  238 000000EE 0E 9D           DCW              -25330      ; 55 0x9d0e -0.7730
                                                            1
  239 000000F0 7E A5           DCW              -23170      ; 56 0xa57e -0.7070
                                                            9
  240 000000F2 CC AE           DCW              -20788      ; 57 0xaecc -0.6344
                                                            0
  241 000000F4 E3 B8           DCW              -18205      ; 58 0xb8e3 -0.5555
                                                            7
  242 000000F6 A9 C3           DCW              -15447      ; 59 0xc3a9 -0.4714
                                                            1
  243 000000F8 04 CF           DCW              -12540      ; 60 0xcf04 -0.3826
                                                            9
  244 000000FA D8 DA           DCW              -9512       ; 61 0xdad8 -0.2902
                                                            8
  245 000000FC 07 E7           DCW              -6393       ; 62 0xe707 -0.1951
                                                            0
  246 000000FE 74 F3           DCW              -3212       ; 63 0xf374 -0.0980
                                                            2
  247 00000100         
  248 00000100         
  249 00000100         
  250 00000100         
  251 00000100         
  252 00000100                 END
Command Line: --debug --xref --diag_suppress=9931 --cpu=Cortex-M3 --apcs=interw
ork --depend=.\obj\dft.d -o.\obj\dft.o -I.\RTE\_Simu -IC:\Programdata\Keil\Arm\
Packs\ARM\CMSIS\5.7.0\CMSIS\Core\Include -IC:\Programdata\Keil\Arm\Packs\Keil\S



ARM Macro Assembler    Page 8 


TM32F1xx_DFP\2.3.0\Device\Include --predefine="__EVAL SETA 1" --predefine="__MI
CROLIB SETA 1" --predefine="__UVISION_VERSION SETA 530" --predefine="_RTE_ SETA
 1" --predefine="STM32F10X_MD SETA 1" --predefine="_RTE_ SETA 1" --list=dft.lst
 Src\DFT.s



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

mesdata 00000000

Symbol: mesdata
   Definitions
      At line 8 in file Src\DFT.s
   Uses
      None
Comment: mesdata unused
1 symbol



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

Iterateur 00000000

Symbol: Iterateur
   Definitions
      At line 12 in file Src\DFT.s
   Uses
      None
Comment: Iterateur unused
Viktor 0000000C

Symbol: Viktor
   Definitions
      At line 15 in file Src\DFT.s
   Uses
      None
Comment: Viktor unused
imaginaire 00000008

Symbol: imaginaire
   Definitions
      At line 14 in file Src\DFT.s
   Uses
      At line 42 in file Src\DFT.s
      At line 86 in file Src\DFT.s

maram 00000000

Symbol: maram
   Definitions
      At line 11 in file Src\DFT.s
   Uses
      None
Comment: maram unused
reel 00000004

Symbol: reel
   Definitions
      At line 13 in file Src\DFT.s
   Uses
      At line 41 in file Src\DFT.s
      At line 99 in file Src\DFT.s

5 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

CalculCos 0000004C

Symbol: CalculCos
   Definitions
      At line 66 in file Src\DFT.s
   Uses
      At line 32 in file Src\DFT.s
Comment: CalculCos used once
CalculSin 00000034

Symbol: CalculSin
   Definitions
      At line 52 in file Src\DFT.s
   Uses
      At line 38 in file Src\DFT.s
Comment: CalculSin used once
DFT_ModuleAuCarre 00000000

Symbol: DFT_ModuleAuCarre
   Definitions
      At line 27 in file Src\DFT.s
   Uses
      At line 17 in file Src\DFT.s
Comment: DFT_ModuleAuCarre used once
OperationCos 00000082

Symbol: OperationCos
   Definitions
      At line 93 in file Src\DFT.s
   Uses
      At line 70 in file Src\DFT.s
Comment: OperationCos used once
OperationSin 00000064

Symbol: OperationSin
   Definitions
      At line 80 in file Src\DFT.s
   Uses
      At line 56 in file Src\DFT.s
Comment: OperationSin used once
boucle1 00000038

Symbol: boucle1
   Definitions
      At line 55 in file Src\DFT.s
   Uses
      At line 61 in file Src\DFT.s
Comment: boucle1 used once
boucle2 00000050

Symbol: boucle2
   Definitions
      At line 69 in file Src\DFT.s
   Uses
      At line 75 in file Src\DFT.s
Comment: boucle2 used once
moncode 00000000

Symbol: moncode



ARM Macro Assembler    Page 2 Alphabetic symbol ordering
Relocatable symbols

   Definitions
      At line 24 in file Src\DFT.s
   Uses
      None
Comment: moncode unused
8 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
Relocatable symbols

TabCos 00000000

Symbol: TabCos
   Definitions
      At line 117 in file Src\DFT.s
   Uses
      At line 29 in file Src\DFT.s
      At line 112 in file Src\DFT.s

TabSin 00000080

Symbol: TabSin
   Definitions
      At line 182 in file Src\DFT.s
   Uses
      At line 35 in file Src\DFT.s
      At line 113 in file Src\DFT.s

Trigo 00000000

Symbol: Trigo
   Definitions
      At line 111 in file Src\DFT.s
   Uses
      None
Comment: Trigo unused
3 symbols



ARM Macro Assembler    Page 1 Alphabetic symbol ordering
External symbols

LeSignal 00000000

Symbol: LeSignal
   Definitions
      At line 9 in file Src\DFT.s
   Uses
      None
Comment: LeSignal unused
1 symbol
355 symbols in table
